# üéôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–¥–∏–æ-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã Promo.Music

## üìä –û–±—â–∞—è —Å—Ö–µ–º–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PROMO.MUSIC CLOUD PLATFORM                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
‚îÇ  ‚îÇ  Stream Server   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  Audio CDN       ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  (Icecast/SRS)   ‚îÇ        ‚îÇ  (CloudFlare)    ‚îÇ              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
‚îÇ           ‚îÇ                                                      ‚îÇ
‚îÇ           ‚ñº                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
‚îÇ  ‚îÇ          Playlist Manager & Scheduler         ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - –ü–ª–µ–π–ª–∏—Å—Ç—ã –∑–∞–≤–µ–¥–µ–Ω–∏–π                        ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - –î–∂–∏–Ω–≥–ª—ã, —Ä–µ–∫–ª–∞–º–∞, –∞–Ω–æ–Ω—Å—ã                   ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —ç—Ñ–∏—Ä–∞                           ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–æ—Ç–∞—Ü–∏—è                     ‚îÇ              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
‚îÇ           ‚îÇ                                                      ‚îÇ
‚îÇ           ‚ñº                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
‚îÇ  ‚îÇ          WebSocket / REST API                 ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—â–∞–Ω–∏–µ–º                        ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - –°—Ç–∞—Ç—É—Å –ø–ª–µ–µ—Ä–∞                              ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ  - –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–∫–æ–≤                          ‚îÇ              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
‚îÇ           ‚îÇ                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ
            ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    VENUE ENDPOINTS (–ó–∞–≤–µ–¥–µ–Ω–∏—è)                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                 ‚îÇ
‚îÇ  –í–ê–†–ò–ê–ù–¢ 1: –í–µ–±-–ø–ª–µ–µ—Ä (—Ç–µ–∫—É—â–∏–π)                               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  ‚îÇ  Browser Player                         ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  - –°—Ç—Ä–∏–º —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã                   ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å      ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  - –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è           ‚îÇ                   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  –í–ê–†–ò–ê–ù–¢ 2: Hardware Box (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  ‚îÇ  Raspberry Pi / Mini PC                 ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  - –ê–≤—Ç–æ–Ω–æ–º–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ                ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  - –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ   ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  - –ê—É–¥–∏–æ –≤—ã—Ö–æ–¥ ‚Üí –∞–∫—É—Å—Ç–∏—á–µ—Å–∫–∞—è —Å–∏—Å—Ç–µ–º–∞   ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  - Backup –ø–ª–µ–π–ª–∏—Å—Ç –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏     ‚îÇ                   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îÇ  –í–ê–†–ò–ê–ù–¢ 3: Mobile App (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                   ‚îÇ
‚îÇ  ‚îÇ  iOS / Android App                      ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞                ‚îÇ                   ‚îÇ
‚îÇ  ‚îÇ  - AirPlay / Chromecast –ø–æ–¥–¥–µ—Ä–∂–∫–∞       ‚îÇ                   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                   ‚îÇ
‚îÇ                                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîå –ü—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞/–ø–ª–µ–µ—Ä–∞

```javascript
// –®–∞–≥ 1: –ó–∞–≤–µ–¥–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–ª–µ–µ—Ä
POST /api/radio/register-player
{
  "venue_id": "uuid",
  "player_type": "web" | "hardware" | "mobile",
  "device_id": "unique-device-id",
  "location": {
    "lat": 55.7558,
    "lng": 37.6173
  }
}

// –û—Ç–≤–µ—Ç
{
  "player_id": "uuid",
  "stream_url": "https://stream.promo.music/venue-{id}",
  "websocket_url": "wss://api.promo.music/ws/player/{id}",
  "auth_token": "jwt-token",
  "config": {
    "playlist_id": "uuid",
    "volume": 0.8,
    "crossfade": 3,
    "jingle_frequency": 5
  }
}
```

### 2. WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```javascript
// –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket
const ws = new WebSocket('wss://api.promo.music/ws/player/{id}?token={auth_token}');

// –°–æ–±—ã—Ç–∏—è –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  
  switch(data.type) {
    case 'PLAY':
      player.play();
      break;
    
    case 'PAUSE':
      player.pause();
      break;
    
    case 'VOLUME':
      player.setVolume(data.volume);
      break;
    
    case 'LOAD_PLAYLIST':
      player.loadPlaylist(data.playlist_id);
      break;
    
    case 'UPDATE_TRACK':
      player.loadTrack(data.track);
      break;
    
    case 'INJECT_CONTENT':
      // –í—Å—Ç–∞–≤–∏—Ç—å –¥–∂–∏–Ω–≥–ª/—Ä–µ–∫–ª–∞–º—É –≤ —ç—Ñ–∏—Ä
      player.injectContent(data.content);
      break;
  }
};

// –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
player.on('statusChange', () => {
  ws.send(JSON.stringify({
    type: 'STATUS_UPDATE',
    status: {
      is_playing: player.isPlaying,
      current_track: player.currentTrack,
      current_time: player.currentTime,
      volume: player.volume,
      timestamp: Date.now()
    }
  }));
});
```

### 3. Stream –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

#### –í–∞—Ä–∏–∞–Ω—Ç A: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å—Ç—Ä–∏–º (–ø—Ä–æ—â–µ)
```
–ü–ª–µ–µ—Ä –∑–∞–≤–µ–¥–µ–Ω–∏—è ‚Üí –ü–æ–ª—É—á–∞–µ—Ç –≥–æ—Ç–æ–≤—ã–π —Å—Ç—Ä–∏–º —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
‚îî‚îÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –ø—Ä–æ—Å—Ç–æ—Ç–∞, –Ω–∏–∑–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É
‚îî‚îÄ –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –∑–∞–¥–µ—Ä–∂–∫–∏
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ì–∏–±—Ä–∏–¥–Ω—ã–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```
–ü–ª–µ–µ—Ä –∑–∞–≤–µ–¥–µ–Ω–∏—è:
1. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –ø–ª–µ–π–ª–∏—Å—Ç —Å —Ç—Ä–µ–∫–∞–º–∏
2. –ö–µ—à–∏—Ä—É–µ—Ç —Ç—Ä–µ–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ
3. –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –ª–æ–∫–∞–ª—å–Ω–æ
4. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π
5. –ü—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏ ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç –∫–µ—à–∞

‚îî‚îÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞
‚îî‚îÄ –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏: —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ä–µ—Å—É—Ä—Å–æ–≤ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
```

## üèóÔ∏è –¢–µ—Ö—Å—Ç–µ–∫ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

### Backend (Streaming Server)
```yaml
–í–∞—Ä–∏–∞–Ω—Ç 1: Icecast
  - –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è —Ä–∞–¥–∏–æ
  - –û—Ç–∫—Ä—ã—Ç—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ MP3/OGG/AAC
  - Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
  
–í–∞—Ä–∏–∞–Ω—Ç 2: SRS (Simple Realtime Server)
  - –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å—Ç—Ä–∏–º–∏–Ω–≥-—Å–µ—Ä–≤–µ—Ä
  - –ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
  - WebRTC –ø–æ–¥–¥–µ—Ä–∂–∫–∞
  - –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è

–í–∞—Ä–∏–∞–Ω—Ç 3: Supabase Realtime + Storage
  - –£–∂–µ –µ—Å—Ç—å –≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–µ
  - WebSocket –∏–∑ –∫–æ—Ä–æ–±–∫–∏
  - –•—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –∞—É–¥–∏–æ
  - –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
```

### Audio CDN
```yaml
CloudFlare Stream:
  - –ì–ª–æ–±–∞–ª—å–Ω—ã–π CDN
  - –ù–∏–∑–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
  - DDoS –∑–∞—â–∏—Ç–∞
  - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞

AWS CloudFront + S3:
  - –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Lambda
  - –†–µ–≥–∏–æ–Ω—ã –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É
```

### Playlist Engine
```javascript
// –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç—Ñ–∏—Ä–æ–º
class PlaylistEngine {
  constructor(venueId) {
    this.venueId = venueId;
    this.currentPlaylist = null;
    this.currentTrackIndex = 0;
    this.contentQueue = []; // –î–∂–∏–Ω–≥–ª—ã, —Ä–µ–∫–ª–∞–º–∞
  }

  async loadPlaylist(playlistId) {
    const playlist = await db.playlists.get(playlistId);
    this.currentPlaylist = playlist;
    this.currentTrackIndex = 0;
  }

  getNextTrack() {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω—É–∂–Ω–æ –ª–∏ –≤—Å—Ç–∞–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç
    if (this.shouldInjectContent()) {
      return this.contentQueue.shift();
    }

    // –ë–µ—Ä—ë–º —Å–ª–µ–¥—É—é—â–∏–π —Ç—Ä–µ–∫ –∏–∑ –ø–ª–µ–π–ª–∏—Å—Ç–∞
    const track = this.currentPlaylist.tracks[this.currentTrackIndex];
    this.currentTrackIndex = (this.currentTrackIndex + 1) % this.currentPlaylist.tracks.length;
    return track;
  }

  shouldInjectContent() {
    // –õ–æ–≥–∏–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ –¥–∂–∏–Ω–≥–ª–æ–≤/—Ä–µ–∫–ª–∞–º—ã
    // –ù–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∂–¥—ã–µ 5 —Ç—Ä–µ–∫–æ–≤
    return this.contentQueue.length > 0 && this.currentTrackIndex % 5 === 0;
  }

  scheduleContent(content, priority = 'normal') {
    if (priority === 'urgent') {
      this.contentQueue.unshift(content);
    } else {
      this.contentQueue.push(content);
    }
  }
}
```

## üì± –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (Hardware Box)

### Raspberry Pi Setup
```bash
# –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
Raspberry Pi OS Lite (64-bit)

# –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã
sudo apt-get install -y \
  vlc \
  ffmpeg \
  python3 \
  python3-pip \
  alsa-utils

# Python –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
pip3 install \
  websocket-client \
  requests \
  python-vlc
```

### Python –∫–ª–∏–µ–Ω—Ç –¥–ª—è Hardware Box
```python
# /home/pi/promo-radio-player/player.py

import vlc
import websocket
import json
import requests
import time
from threading import Thread

class PromoRadioPlayer:
    def __init__(self, venue_id, device_id):
        self.venue_id = venue_id
        self.device_id = device_id
        self.player = vlc.MediaPlayer()
        self.ws = None
        self.auth_token = None
        self.current_track = None
        
    def register(self):
        """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ"""
        response = requests.post(
            'https://api.promo.music/radio/register-player',
            json={
                'venue_id': self.venue_id,
                'player_type': 'hardware',
                'device_id': self.device_id
            }
        )
        data = response.json()
        self.auth_token = data['auth_token']
        self.stream_url = data['stream_url']
        self.ws_url = data['websocket_url']
        return data
        
    def connect_websocket(self):
        """–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è"""
        def on_message(ws, message):
            data = json.loads(message)
            self.handle_command(data)
            
        def on_error(ws, error):
            print(f"WebSocket error: {error}")
            
        def on_close(ws):
            print("WebSocket closed, reconnecting...")
            time.sleep(5)
            self.connect_websocket()
            
        self.ws = websocket.WebSocketApp(
            f"{self.ws_url}?token={self.auth_token}",
            on_message=on_message,
            on_error=on_error,
            on_close=on_close
        )
        
        ws_thread = Thread(target=self.ws.run_forever)
        ws_thread.daemon = True
        ws_thread.start()
        
    def handle_command(self, data):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–º–∞–Ω–¥ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"""
        cmd = data.get('type')
        
        if cmd == 'PLAY':
            self.player.play()
        elif cmd == 'PAUSE':
            self.player.pause()
        elif cmd == 'VOLUME':
            self.player.audio_set_volume(int(data['volume'] * 100))
        elif cmd == 'LOAD_TRACK':
            self.load_track(data['track'])
            
    def load_track(self, track):
        """–ó–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞"""
        self.current_track = track
        media = vlc.Media(track['url'])
        self.player.set_media(media)
        self.player.play()
        self.send_status()
        
    def send_status(self):
        """–û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä"""
        if self.ws:
            self.ws.send(json.dumps({
                'type': 'STATUS_UPDATE',
                'status': {
                    'is_playing': self.player.is_playing(),
                    'current_track': self.current_track,
                    'volume': self.player.audio_get_volume() / 100,
                    'timestamp': int(time.time() * 1000)
                }
            }))
            
    def run(self):
        """–û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã –ø–ª–µ–µ—Ä–∞"""
        print("Starting Promo.Music Radio Player...")
        
        # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        config = self.register()
        print(f"Registered as player: {config['player_id']}")
        
        # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ WebSocket
        self.connect_websocket()
        print("Connected to control server")
        
        # –ù–∞—á–∏–Ω–∞–µ–º –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ —Å—Ç—Ä–∏–º–∞
        media = vlc.Media(self.stream_url)
        self.player.set_media(media)
        self.player.play()
        
        # –û—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª
        while True:
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
            self.send_status()
            time.sleep(10)

# –ó–∞–ø—É—Å–∫
if __name__ == '__main__':
    player = PromoRadioPlayer(
        venue_id='your-venue-id',
        device_id='raspberrypi-001'
    )
    player.run()
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
```javascript
// JWT —Ç–æ–∫–µ–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–ª–µ–µ—Ä–∞
const token = jwt.sign({
  venue_id: venue.id,
  player_id: player.id,
  device_type: 'hardware',
  permissions: ['play', 'pause', 'volume', 'skip']
}, process.env.JWT_SECRET, {
  expiresIn: '30d' // –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
});
```

### –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∏–º–∞
```yaml
SSL/TLS –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π:
  - HTTPS –¥–ª—è API
  - WSS –¥–ª—è WebSocket
  - –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Å—Ç—Ä–∏–º (HTTPS streaming)
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –ø–ª–µ–µ—Ä–∞
```javascript
// –°–æ–±–∏—Ä–∞–µ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–≤–µ–¥–µ–Ω–∏—è
{
  "venue_id": "uuid",
  "metrics": {
    "uptime": 99.8,                    // % –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã
    "buffering_events": 3,             // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏–π
    "average_bitrate": 320,            // kbps
    "tracks_played_today": 245,        // –¢—Ä–µ–∫–æ–≤ —Å—ã–≥—Ä–∞–Ω–æ
    "listener_engagement": 0.85,       // –í–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å
    "connection_quality": "excellent"  // –ö–∞—á–µ—Å—Ç–≤–æ —Å–≤—è–∑–∏
  },
  "last_seen": "2026-02-04T12:30:00Z"
}
```

## üöÄ Roadmap –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

### –§–∞–∑–∞ 1: MVP (–¢–µ–∫—É—â–∞—è)
- ‚úÖ –í–µ–±-–ø–ª–µ–µ—Ä –≤ –∫–∞–±–∏–Ω–µ—Ç–µ –∑–∞–≤–µ–¥–µ–Ω–∏—è
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–µ–π–ª–∏—Å—Ç–∞–º–∏
- ‚úÖ –ë–∞–∑–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç (–¥–∂–∏–Ω–≥–ª—ã, —Ä–µ–∫–ª–∞–º–∞)
- üîÑ –õ–æ–∫–∞–ª—å–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

### –§–∞–∑–∞ 2: Cloud Platform
- ‚è≥ Centralized streaming server
- ‚è≥ WebSocket API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚è≥ RESTful API –¥–ª—è –ø–ª–µ–π–ª–∏—Å—Ç–æ–≤
- ‚è≥ –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –§–∞–∑–∞ 3: Hardware Deployment
- ‚è≥ Raspberry Pi –∫–ª–∏–µ–Ω—Ç
- ‚è≥ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ü–û
- ‚è≥ Fallback —Ä–µ–∂–∏–º –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏
- ‚è≥ –£–¥–∞–ª—ë–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –§–∞–∑–∞ 4: Advanced Features
- ‚è≥ AI-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ—Ç–∞—Ü–∏–µ–π
- ‚è≥ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Ä–µ–∫–ª–∞–º–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
- ‚è≥ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –∑–∞–≤–µ–¥–µ–Ω–∏—è–º–∏ —Å–µ—Ç–∏
- ‚è≥ –ì–æ–ª–æ—Å–æ–≤—ã–µ –∞–Ω–æ–Ω—Å—ã —Å TTS

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –Ω–∞—á–∞–ª–∞ (MVP)
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—É—â–∏–π –≤–µ–±-–ø–ª–µ–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π streaming endpoint –Ω–∞ Supabase
3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –±–∞–∑–æ–≤—ã–π WebSocket –¥–ª—è –∫–æ–º–∞–Ω–¥

### –î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
1. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Icecast/SRS –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CDN –¥–ª—è —Å—Ç—Ä–∏–º–æ–≤
3. –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å Python –∫–ª–∏–µ–Ω—Ç –¥–ª—è Raspberry Pi
4. –°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### –î–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏
1. –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤
2. Fallback –ø–ª–µ–π–ª–∏—Å—Ç –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–±–æ—Ç—ã 24/7
