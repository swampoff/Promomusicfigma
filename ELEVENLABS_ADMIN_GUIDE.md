# 🎙️ ГАЙД ДЛЯ АДМИНА: ГЕНЕРАЦИЯ АУДИО ЧЕРЕЗ ELEVENLABS

## 📍 ГДЕ НАХОДИТСЯ ПАНЕЛЬ?

### 1️⃣ **ВХОД В СИСТЕМУ**
```
1. Открыть приложение Promo.Music
2. На экране логина выбрать: 👤 Администратор
3. Ввести email: admin@promo.music
4. Войти
```

---

### 2️⃣ **НАВИГАЦИЯ В АДМИНКЕ**

После входа вы увидите **левую боковую панель** с меню:

```
┌─────────────────────────────────┐
│  🎵 PROMO.MUSIC                 │
│  Панель администратора          │
├─────────────────────────────────┤
│                                 │
│  🛡️ Администратор               │
│  admin@promo.music              │
│                                 │
│  ⚠️ Ожидают: 5                  │
├─────────────────────────────────┤
│                                 │
│  📊 Дашборд                     │
│  🛡️ Модерация            47    │
│  ✨ Заказы контента      5 ⬅️  │ ← ЗДЕСЬ!
│  📤 Питчинг              3     │
│  👥 Пользователи               │
│  💼 Партнеры                    │
│  💰 Финансы                     │
│  🎧 Поддержка            12    │
│  ⚙️ Настройки                   │
│                                 │
│  🚪 Выход                       │
└─────────────────────────────────┘
```

**👉 НАЖМИТЕ НА: ✨ Заказы контента**

---

### 3️⃣ **ЭКРАН ЗАКАЗОВ КОНТЕНТА**

После нажатия вы попадете на экран управления заказами:

```
╔═══════════════════════════════════════════════════════════════╗
║  ✨ Заказы контента                         🔄 Обновить      ║
║  Управление заказами джинглов, рекламы и анонсов             ║
╠═══════════════════════════════════════════════════════════════╣
║                                                               ║
║  ┌─────────┬─────────┬─────────┬─────────┐                  ║
║  │ Всего   │Ожидают  │В работе │ Готовы  │                  ║
║  │   12    │   5     │   3     │   4     │                  ║
║  └─────────┴─────────┴─────────┴─────────┘                  ║
║                                                               ║
║  🔍 Поиск...              [Все статусы ▼]                    ║
║                                                               ║
║  ┌────────────────────────────────────────────────────────┐  ║
║  │ 🎵 Sunset Lounge                  ⏱ Ожидает ▼         │  ║
║  │    Джингл • 15с • 3000₽                               │  ║
║  │    "Добро пожаловать в Sunset Lounge..."              │  ║
║  │                                                        │  ║
║  │    Стиль: professional • Голос: male • 04.02.2026     │  ║
║  │                              [🚀 В ElevenLabs] ⬅️      │  ← КНОПКА!
║  └────────────────────────────────────────────────────────┘  ║
║                                                               ║
║  ┌────────────────────────────────────────────────────────┐  ║
║  │ 🎵 Night Club                     🔵 В работе ▼        │  ║
║  │    Реклама • 30с • 5000₽                              │  ║
║  │    "Каждую пятницу..."                                │  ║
║  │                                                        │  ║
║  │    Стиль: energetic • Голос: female • 03.02.2026      │  ║
║  │                              [⏳ Генерация...]         │  ║
║  └────────────────────────────────────────────────────────┘  ║
║                                                               ║
║  ┌────────────────────────────────────────────────────────┐  ║
║  │ 🎵 Jazz Bar                       ✅ Готов ▼           │  ║
║  │    Анонс • 10с • 2000₽                                │  ║
║  │    "Сегодня в эфире..."                               │  ║
║  │                                                        │  ║
║  │    Стиль: friendly • Голос: neutral • 02.02.2026      │  ║
║  │                              [✅ Аудио готово]         │  ║
║  └────────────────────────────────────────────────────────┘  ║
╚═══════════════════════════════════════════════════════════════╝
```

---

## 🎯 КАК ГЕНЕРИРОВАТЬ АУДИО?

### **СПОСОБ 1: Быстрая генерация из списка**

1. **Найдите заказ** со статусом "⏱ Ожидает" или "✅ Готов"
2. **Нажмите кнопку** `🚀 В ElevenLabs`
3. **Подождите 5-10 секунд**
   - Кнопка изменится на: `⏳ Генерация...`
4. **Получите подтверждение:**
   ```
   ✅ Аудио успешно сгенерировано!
   
   🔗 URL: https://qzpmiiqfwkcnrhvubdgt.supabase.co/storage...
   ```
5. **Карточка обновится:**
   - Статус → "🔵 В работе"
   - Появится badge: `✅ Аудио готово`

---

### **СПОСОБ 2: Детальная генерация через модальное окно**

1. **Кликните на карточку заказа** (в любом месте)
2. **Откроется модальное окно** с полной информацией:

```
╔══════════════════════════════════════════════════════╗
║  Sunset Lounge                                       ║
║  Заказ #a1b2c3d4                                    ║
╠══════════════════════════════════════════════════════╣
║                                                      ║
║  Тип: Джингл           Длительность: 15 секунд     ║
║  Стиль: professional   Голос: male                  ║
║  Цена: 3000₽          Создан: 04.02.2026 14:30     ║
║                                                      ║
║  Текст:                                             ║
║  ┌────────────────────────────────────────────────┐ ║
║  │ Добро пожаловать в Sunset Lounge - лучшее     │ ║
║  │ место для отдыха в центре города!             │ ║
║  └────────────────────────────────────────────────┘ ║
║                                                      ║
║  Статус:                                            ║
║  [Готов                                        ▼]  ║
║                                                      ║
║  Комментарий администратора:                        ║
║  ┌────────────────────────────────────────────────┐ ║
║  │ Отличный текст, готов к генерации             │ ║
║  └────────────────────────────────────────────────┘ ║
║                                                      ║
║  [🎙️ Генерировать аудио] ⬅️ КНОПКА                  ║
║                                                      ║
╠══════════════════════════════════════════════════════╣
║  [Отмена]                           [Сохранить]     ║
╚══════════════════════════════════════════════════════╝
```

3. **Нажмите** `🎙️ Генерировать аудио`
4. **Дождитесь завершения**
5. **Закройте окно** - заказ обновится автоматически

---

## 🎬 ПОЛНЫЙ РАБОЧИЙ ПРОЦЕСС

### **1. VENUE СОЗДАЕТ ЗАКАЗ**
```
Venue → Радиобренд → Контент → Джинглы
      → "Заказать джингл"
      → Заполняет форму
      → Отправляет (оплата списывается с баланса)
```

### **2. ADMIN ПОЛУЧАЕТ ЗАКАЗ**
```
Admin → Заказы контента
      → Видит новый заказ со статусом "⏱ Ожидает"
      → Badge показывает: 5 новых заказов
```

### **3. ADMIN ГЕНЕРИРУЕТ АУДИО**
```
Admin → Нажимает "🚀 В ElevenLabs"
      → 
BACKEND → Получает текст из заказа
        → Отправляет в ElevenLabs API
        → Получает MP3 файл
        → Сохраняет в Supabase Storage
        → Создает signed URL (1 год)
        → Обновляет заказ:
          • status: "processing"
          • audioUrl: "https://..."
          • generatedAt: "2026-02-04T14:30:00Z"
```

### **4. VENUE ПОЛУЧАЕТ ФАЙЛ**
```
Venue → Радиобренд → Контент → Джинглы
      → Видит заказ со статусом "🔵 В работе"
      → Кнопка "▶️ Прослушать" активна
      → Может скачать файл
      → Может утвердить или запросить доработку
```

---

## 🔧 УПРАВЛЕНИЕ СТАТУСАМИ

### **ДОСТУПНЫЕ СТАТУСЫ:**

| Статус | Значок | Описание | Действие админа |
|--------|--------|----------|-----------------|
| **Ожидает** | ⏱ | Новый заказ | Сгенерировать аудио |
| **В работе** | 🔵 | Аудио генерируется/готово | Отправить клиенту |
| **На проверке** | 🟣 | Клиент проверяет | Ждать отзыва |
| **Готов** | ✅ | Аудио утверждено | Можно закрыть |
| **Утвержден** | 🟢 | Финальный вариант | Заказ завершен |
| **Доработка** | 🟠 | Нужны правки | Внести изменения |
| **Завершен** | 🔵 | Полностью готов | Архивирован |
| **Отменен** | 🔴 | Отменен клиентом | Вернуть деньги |

### **КАК ИЗМЕНИТЬ СТАТУС:**

**Вариант А: Из карточки**
```
1. Нажать на badge статуса (например: "⏱ Ожидает ▼")
2. Откроется dropdown меню
3. Выбрать нужный статус
4. Статус обновится мгновенно
```

**Вариант Б: Из модального окна**
```
1. Открыть детали заказа
2. Изменить статус в выпадающем списке
3. Добавить комментарий (опционально)
4. Нажать "Сохранить"
```

---

## 📊 ФИЛЬТРЫ И ПОИСК

### **ФИЛЬТРАЦИЯ ПО СТАТУСУ:**
```
[Все статусы ▼]
  ├─ Все статусы (12)
  ├─ Ожидает (5)
  ├─ В работе (3)
  ├─ На проверке (1)
  ├─ Готов (2)
  ├─ Утвержден (0)
  ├─ Доработка (1)
  ├─ Завершен (0)
  └─ Отменен (0)
```

### **ПОИСК:**
```
🔍 Поиск по заведению или тексту...
    ↓
    "Sunset" → Найдет "Sunset Lounge"
    "Добро" → Найдет заказы с текстом "Добро пожаловать..."
```

---

## 🎨 ВИЗУАЛЬНЫЕ ИНДИКАТОРЫ

### **BADGE В МЕНЮ:**
```
✨ Заказы контента      5  ← Количество новых/ожидающих
```

### **КНОПКИ ГЕНЕРАЦИИ:**
```
[🚀 В ElevenLabs]      ← Готов к генерации
[⏳ Генерация...]      ← Процесс идет
[✅ Аудио готово]      ← Завершено
```

### **СТАТУС-BADGES:**
```
⏱ Ожидает       (желтый)
🔵 В работе     (синий)
🟣 На проверке  (фиолетовый)
✅ Готов        (зеленый)
🟢 Утвержден    (изумрудный)
🟠 Доработка    (оранжевый)
🔵 Завершен     (бирюзовый)
🔴 Отменен      (красный)
```

---

## 🚨 ОШИБКИ И ИХ РЕШЕНИЕ

### **❌ "ElevenLabs API key not configured"**
```
ПРОБЛЕМА: Не настроен API ключ
РЕШЕНИЕ:
  1. Получить ключ на https://elevenlabs.io
  2. Settings → Secrets → ELEVENLABS_API_KEY
  3. Вставить ключ
  4. Сохранить
```

### **❌ "ElevenLabs API error: 401"**
```
ПРОБЛЕМА: Неверный API ключ
РЕШЕНИЕ:
  1. Проверить ключ на elevenlabs.io
  2. Сгенерировать новый ключ
  3. Обновить в настройках
```

### **❌ "Order not found"**
```
ПРОБЛЕМА: Заказ не существует
РЕШЕНИЕ:
  1. Обновить список (кнопка "🔄 Обновить")
  2. Проверить ID заказа
  3. Возможно заказ был удален
```

### **❌ "Storage upload error"**
```
ПРОБЛЕМА: Ошибка сохранения в Storage
РЕШЕНИЕ:
  1. Проверить настройки Supabase
  2. Проверить квоту Storage
  3. Попробовать еще раз
```

### **⚠️ Долгая генерация (>30 секунд)**
```
ПРИЧИНЫ:
  - Большой текст (>500 символов)
  - Загруженность ElevenLabs API
  - Медленный интернет

РЕШЕНИЕ:
  - Подождать еще немного
  - Обновить страницу
  - Попробовать снова
```

---

## 📈 АНАЛИТИКА И СТАТИСТИКА

### **ВЕРХНИЕ КАРТОЧКИ:**
```
┌─────────┬─────────┬─────────┬─────────┐
│ Всего   │Ожидают  │В работе │ Готовы  │
│   12    │   5     │   3     │   4     │
└─────────┴─────────┴─────────┴─────────┘
```

**Показывают:**
- **Всего** - все заказы (все статусы)
- **Ожидают** - нужно обработать (pending)
- **В работе** - в процессе (processing)
- **Готовы** - готовы к отправке (ready)

---

## 💡 СОВЕТЫ ДЛЯ ЭФФЕКТИВНОЙ РАБОТЫ

### **1. Batch processing (пакетная обработка)**
```
✅ Обработайте все "Ожидают" заказы за раз:
   1. Отфильтруйте по статусу "Ожидает"
   2. Откройте в новых вкладках (Ctrl+Click)
   3. Нажмите "В ElevenLabs" во всех
   4. Закройте вкладки через 10 секунд
```

### **2. Приоритизация**
```
🔥 Высокий приоритет:
   - Заказы дороже 5000₽
   - От постоянных клиентов
   - С срочностью в комментарии

📋 Средний приоритет:
   - Обычные заказы (2000-5000₽)
   - Без особых пометок

🟢 Низкий приоритет:
   - Тестовые заказы
   - С пометкой "не срочно"
```

### **3. Комментарии**
```
✅ Хорошие комментарии:
   "✅ Аудио сгенерировано, высокое качество"
   "🎙️ Использован голос Adam (male, professional)"
   "⏰ Длительность: 14.8 секунд (в норме)"

❌ Плохие комментарии:
   "Готово"
   "ok"
   (пусто)
```

### **4. Горячие клавиши**
```
F5           - Обновить список
Ctrl+F       - Поиск
Esc          - Закрыть модальное окно
Enter        - Сохранить изменения
```

---

## 🔗 БЫСТРЫЕ ССЫЛКИ

```
📊 Дашборд:              /admin/dashboard
✨ Заказы контента:      /admin/content_orders
👥 Клиенты (Venues):     /admin/users?filter=venue
💰 Финансы:              /admin/finances
🎧 Поддержка:            /admin/support
```

---

## 📞 КОНТАКТЫ ПОДДЕРЖКИ

```
🐛 Баг репорты:          support@promo.music
💡 Предложения:          feedback@promo.music
🚨 Срочные вопросы:      admin@promo.music
```

---

## ✅ ЧЕКЛИСТ ПЕРЕД ЗАПУСКОМ

- [ ] API ключ ElevenLabs настроен
- [ ] Проверен баланс ElevenLabs (минимум 5000 символов)
- [ ] Протестирована генерация на тестовом заказе
- [ ] Проверена работа Storage (файлы сохраняются)
- [ ] Проверены signed URLs (открываются и проигрываются)
- [ ] Настроены уведомления для venues
- [ ] Известен процесс возврата средств при отмене

---

**🎉 ВСЕ ГОТОВО! НАЧИНАЙТЕ ОБРАБАТЫВАТЬ ЗАКАЗЫ!** 🎙️✨
