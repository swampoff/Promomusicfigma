# 📸 ОБЛОЖКА ПРОФИЛЯ ЗАВЕДЕНИЯ - ГДЕ ОТОБРАЖАЕТСЯ

## 🎯 Где находится обложка

### Визуально:

```
╔══════════════════════════════════════════════════════╗
║  ПРОФИЛЬ ЗАВЕДЕНИЯ              [Редактировать]      ║
╠══════════════════════════════════════════════════════╣
║                                                       ║
║            📸 ОБЛОЖКА (COVER IMAGE)                  ║
║         256px высота (192px на mobile)               ║
║                                                       ║
║                   [📤 Загрузить обложку] <-- hover   ║
║                                                       ║
║         🖼️ ЛОГОТИП                                   ║
║        (128x128px)                                    ║
║      Overlays обложку                                ║
╠══════════════════════════════════════════════════════╣
║  [Основное] [Локация] [Медиа] [Часы] [Настройки]    ║
╚══════════════════════════════════════════════════════╝
```

---

## ✅ Как загрузить обложку (ТЕПЕРЬ РАБОТАЕТ!)

### Шаг 1: Открой профиль
1. Открой **Venue кабинет**
2. Кликни **"Профиль"** в меню

### Шаг 2: Режим редактирования
1. Нажми кнопку **"Редактировать"** (справа вверху)

### Шаг 3: Загрузка
1. **Наведи мышь** на область обложки (большой прямоугольник вверху)
2. Появится кнопка **"📤 Загрузить обложку"**
3. **Кликни** на кнопку
4. Выбери изображение с компьютера

### Шаг 4: Сохранение
1. Обложка **сразу отобразится** (превью)
2. Нажми **"Сохранить"** для применения

---

## 📐 Спецификация

### Обложка (Cover Image):
```
Расположение:  Вверху профиля
Размер:        100% ширина × 256px высота (desktop)
               100% ширина × 192px высота (mobile)
Формат:        JPG, PNG, WebP
Макс размер:   5 MB
Соотношение:   ~6:1 (широкая)
```

### Логотип (Logo):
```
Расположение:  Overlays обложку, слева снизу
Размер:        128×128px (desktop), 96×96px (mobile)
Формат:        JPG, PNG (прозрачный фон рекомендуется)
Макс размер:   5 MB
Соотношение:   1:1 (квадрат)
Border:        4px solid slate-900
Border radius: 16px (rounded-2xl)
```

---

## 🎨 Рекомендации по дизайну

### Обложка:
- ✅ **Хорошо:** Фото интерьера заведения, атмосфера
- ✅ **Хорошо:** Панорама зала, бар, сцена
- ✅ **Хорошо:** Мероприятие, концерт, гости
- ❌ **Плохо:** Размытые фото
- ❌ **Плохо:** Слишком темные изображения
- ❌ **Плохо:** Текст поверх (он может не читаться)

### Логотип:
- ✅ **Хорошо:** Простой, узнаваемый логотип
- ✅ **Хорошо:** Прозрачный фон (PNG)
- ✅ **Хорошо:** Контрастные цвета
- ❌ **Плохо:** Сложные детали (плохо видны при уменьшении)
- ❌ **Плохо:** Вытянутые формы (лого должно быть квадратным)

---

## 💻 Код (как работает)

### Функция загрузки:

```typescript
const handleImageUpload = (type: 'logo' | 'cover') => {
  // Создаем input для выбора файла
  const input = document.createElement('input');
  input.type = 'file';
  input.accept = 'image/*';
  
  input.onchange = async (e: Event) => {
    const file = (e.target as HTMLInputElement).files?.[0];
    if (!file) return;

    // Проверка размера (макс 5MB)
    if (file.size > 5 * 1024 * 1024) {
      toast.error('Размер файла не должен превышать 5MB');
      return;
    }

    // Проверка типа
    if (!file.type.startsWith('image/')) {
      toast.error('Можно загружать только изображения');
      return;
    }

    // Читаем файл как Data URL для превью
    const reader = new FileReader();
    reader.onload = (event) => {
      const imageUrl = event.target?.result as string;
      
      // Обновляем профиль с новым изображением
      if (type === 'cover') {
        setEditedProfile({
          ...editedProfile,
          coverImageUrl: imageUrl
        });
        toast.success('Обложка загружена!');
      } else {
        setEditedProfile({
          ...editedProfile,
          logoUrl: imageUrl
        });
        toast.success('Логотип загружен!');
      }
    };
    reader.readAsDataURL(file);
  };

  input.click();
};
```

---

## 🔄 Workflow

### 1. По умолчанию (без обложки):
```typescript
profile.coverImageUrl === null
↓
Отображается градиент:
bg-gradient-to-br from-indigo-500/20 to-purple-500/20
+ иконка ImageIcon
```

### 2. Режим редактирования:
```typescript
isEditing === true
↓
Наведение мыши на обложку
↓
opacity-0 → opacity-100 (transition)
↓
Кнопка "Загрузить обложку" появляется
```

### 3. После загрузки:
```typescript
handleImageUpload('cover')
↓
Выбор файла
↓
Валидация (размер, тип)
↓
FileReader.readAsDataURL()
↓
setEditedProfile({ coverImageUrl: dataURL })
↓
Обложка отображается немедленно (превью)
```

### 4. Сохранение:
```typescript
handleSave()
↓
setProfile(editedProfile)
↓
Обложка становится постоянной
```

---

## 🎯 Где увидеть обложку

### 1. В профиле заведения:
- Открой venue кабинет
- Перейди в "Профиль"
- **Обложка вверху** (самый большой элемент)

### 2. В карточке заведения (sidebar):
- В VenueApp.tsx есть карточка профиля
- Там **НЕТ обложки**, только логотип
- Обложка показывается ТОЛЬКО в полном профиле

### 3. В каталоге заведений (будущее):
- Когда создашь catalog venues
- Обложка будет в карточках preview

---

## 📱 Адаптивность

### Desktop (> 1024px):
```
Обложка:  Full width × 256px
Логотип:  128×128px
Позиция:  left-8, -bottom-12
```

### Tablet (768px - 1024px):
```
Обложка:  Full width × 256px
Логотип:  128×128px
Позиция:  left-8, -bottom-12
```

### Mobile (< 768px):
```
Обложка:  Full width × 192px
Логотип:  96×96px
Позиция:  left-6, -bottom-12
```

---

## 🧪 Тестирование

### Тест 1: Загрузка обложки
```
1. Открой профиль
2. Нажми "Редактировать"
3. Наведи на обложку
4. Кликни "Загрузить обложку"
5. Выбери JPG (< 5MB)
6. Обложка должна отобразиться
7. Нажми "Сохранить"
8. Обложка сохранена!
```

### Тест 2: Загрузка логотипа
```
1. Открой профиль
2. Нажми "Редактировать"
3. Наведи на логотип (круг с инициалами)
4. Кликни (появится иконка камеры)
5. Выбери PNG (< 5MB, желательно квадрат)
6. Логотип должен отобразиться
7. Нажми "Сохранить"
```

### Тест 3: Валидация
```
Попробуй загрузить:
- Файл > 5MB → Ошибка ✅
- Не-изображение (PDF) → Ошибка ✅
- Очень большое изображение → Превью работает ✅
```

---

## ⚠️ Важно

### Текущая реализация:
```
✅ Выбор файла работает
✅ Валидация работает
✅ Превью отображается
✅ Сохранение в state работает
❌ Загрузка в Supabase Storage (TODO)
```

### Для production:
```typescript
// Вместо FileReader нужно:
const { data, error } = await supabase.storage
  .from('venue-images')
  .upload(`${venueId}/cover-${Date.now()}.jpg`, file);

if (data) {
  const { data: urlData } = await supabase.storage
    .from('venue-images')
    .getPublicUrl(data.path);
  
  // Сохранить urlData.publicUrl в профиль
}
```

---

## 🎉 Результат

После загрузки обложки ты увидишь:

```
┌────────────────────────────────────────────┐
│                                            │
│     🖼️ ТВОЯ ОБЛОЖКА (фото заведения)      │
│                                            │
│                                            │
│      🎯 ЛОГОТИП                            │
│     (если загружен)                        │
└────────────────────────────────────────────┘
```

**Обложка отображается СРАЗУ и красиво!** 🎨

Больше не будет пустого градиента — твоя фотография заведения на весь экран! 📸
