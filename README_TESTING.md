# üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï API - README

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç

---

## üéØ –ß–¢–û –≠–¢–û?

–ü–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö API endpoints —Å–∏—Å—Ç–µ–º—ã **promo.music**.

**–ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è:**
- üìª Radio API (11 endpoints)
- üè¢ Venue API (9 endpoints)  
- üéôÔ∏è ElevenLabs API (1 endpoint)
- üè• Health Check (1 endpoint)

**–í—Å–µ–≥–æ: 22+ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–∞**

---

## ‚ö° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

### –í–∞—Ä–∏–∞–Ω—Ç 1: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø—Ä–æ—â–µ –≤—Å–µ–≥–æ)

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª
open test-api.html

# 2. –í–≤–µ–¥–∏—Ç–µ –≤ UI:
#    - Project ID: –≤–∞—à Supabase project ID
#    - Auth Token: –ø–æ–ª—É—á–∏—Ç–µ –∏–∑ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

# 3. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã"
```

**–í—Ä–µ–º—è:** 1 –º–∏–Ω—É—Ç–∞ –Ω–∞ setup, 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
export PROJECT_ID="your-project-id"
export AUTH_TOKEN="your-token"

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ
node test-api.mjs
```

**–í—Ä–µ–º—è:** 30 —Å–µ–∫—É–Ω–¥

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

–í—Å–µ —Ñ–∞–π–ª—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

### –î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö:
1. **START HERE** ‚Üí `API_TESTING_READY.md` - –æ–±—â–∏–π –æ–±–∑–æ—Ä
2. **HOW TO** ‚Üí `HOW_TO_TEST_API.md` - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
3. **QUICK** ‚Üí `QUICK_TEST_COMMANDS.md` - –≥–æ—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö:
1. **GUIDE** ‚Üí `API_TESTING_GUIDE.md` - –≤—Å–µ endpoints —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
2. **SUMMARY** ‚Üí `TESTING_COMPLETE_SUMMARY.md` - –ø–æ–ª–Ω–∞—è —Å–≤–æ–¥–∫–∞
3. **VALIDATION** ‚Üí `VALIDATION_AND_TESTING_COMPLETE.md` - –æ—Ç—á–µ—Ç

---

## üõ†Ô∏è –ò–ù–°–¢–†–£–ú–ï–ù–¢–´

### üåê test-api.html
–ö—Ä–∞—Å–∏–≤—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å:
- Real-time —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è
- –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –õ–æ–≥–∏

### üíª test-api.mjs
–ö–æ–Ω—Å–æ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Å:
- –¶–≤–µ—Ç–Ω–æ–π –≤—ã–≤–æ–¥
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
- Exit codes –¥–ª—è CI/CD
- Timeout protection

---

## üîë –ö–ê–ö –ü–û–õ–£–ß–ò–¢–¨ AUTH TOKEN

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

1. –í–æ–π–¥–∏—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ promo.music
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Console
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
const token = localStorage.getItem('supabase.auth.token');
console.log(token);
```

5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Network tab

1. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network
2. –°–¥–µ–ª–∞–π—Ç–µ –ª—é–±–æ–π API –∑–∞–ø—Ä–æ—Å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
3. –ù–∞–π–¥–∏—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer ...`
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω

---

## üìä –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### ‚úÖ –í—Å–µ —Ö–æ—Ä–æ—à–æ:
```
Total:   22 tests
Passed:  17 tests (–ø–æ–∑–∏—Ç–∏–≤–Ω—ã–µ)
Failed:  5 tests  (–Ω–µ–≥–∞—Ç–∏–≤–Ω—ã–µ - —ç—Ç–æ –Ω–æ—Ä–º–∞!)
```

**5 "failed" —Ç–µ—Å—Ç–æ–≤** - —ç—Ç–æ —É—Å–ø–µ—à–Ω—ã–µ —Ç–µ—Å—Ç—ã Zod –≤–∞–ª–∏–¥–∞—Ü–∏–∏:
- Withdrawal —Å amount < 1000 ‚úì
- Invalid payment method ‚úì
- Invalid ad slot type ‚úì
- Invalid export format ‚úì
- Invalid profile URL ‚úì

### ‚ö†Ô∏è –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:
```
Total:   22 tests
Passed:  0-10 tests
Failed:  12-22 tests
```

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. Edge Function –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞ ‚Üí 404 errors
2. –¢–æ–∫–µ–Ω –Ω–µ–≤–µ—Ä–Ω—ã–π ‚Üí 401 errors
3. –¢–∞–±–ª–∏—Ü—ã –Ω–µ —Å–æ–∑–¥–∞–Ω—ã ‚Üí 500 errors
4. CORS –ø—Ä–æ–±–ª–µ–º—ã ‚Üí network errors

**–†–µ—à–µ–Ω–∏–µ:** –°–º. —Å–µ–∫—Ü–∏—é Troubleshooting –≤ `HOW_TO_TEST_API.md`

---

## üêõ TROUBLESHOOTING

### ‚ùå "Route not found" (404)

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# Deploy Edge Function
supabase functions deploy make-server-84730125
```

### ‚ùå "Unauthorized" (401)

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
// –ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π —Ç–æ–∫–µ–Ω
const token = localStorage.getItem('supabase.auth.token');
```

### ‚ùå "Internal Server Error" (500)

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
supabase functions logs make-server-84730125 --tail

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
```

---

## üìã CHECKLIST

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —Ç–µ—Å—Ç–æ–≤:

- [ ] Edge Function —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞
- [ ] Auth Token –ø–æ–ª—É—á–µ–Ω
- [ ] PROJECT_ID –∏–∑–≤–µ—Å—Ç–µ–Ω
- [ ] –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –≤ –ë–î (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

---

## üéØ –ß–¢–û –î–ê–õ–¨–®–ï?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å Frontend** ‚Üí –∑–∞–º–µ–Ω–∏—Ç—å mock –¥–∞–Ω–Ω—ã–µ –Ω–∞ API
2. **–î–æ–±–∞–≤–∏—Ç—å Error Handling** ‚Üí loading/error states
3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å** ‚Üí React Query, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Export** ‚Üí PDF/Excel –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

---

## üìû –ü–û–ú–û–©–¨

**–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?**

1. –ß–∏—Ç–∞–π—Ç–µ `HOW_TO_TEST_API.md` - —Ç–∞–º –≤—Å–µ –æ—Ç–≤–µ—Ç—ã
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Edge Function
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ health check: `curl $API_BASE/health`

---

## üéä QUICK REFERENCE

### –§–∞–π–ª—ã:
```
test-api.html              - –í–µ–± —Ç–µ—Å—Ç–µ—Ä
test-api.mjs              - CLI —Ç–µ—Å—Ç–µ—Ä
API_TESTING_READY.md      - –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
HOW_TO_TEST_API.md        - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
QUICK_TEST_COMMANDS.md    - –ö–æ–º–∞–Ω–¥—ã curl
```

### –ö–æ–º–∞–Ω–¥—ã:
```bash
# Deploy
supabase functions deploy make-server-84730125

# Test (Web)
open test-api.html

# Test (CLI)
node test-api.mjs

# Health check
curl $API_BASE/health
```

### Endpoints:
```
Radio:   /api/radio/*
Venue:   /api/venue/*
ElevenLabs: /api/elevenlabs/*
Health:  /health
```

---

## ‚úÖ TL;DR

```bash
# 1. Setup
export PROJECT_ID="your-id"
export AUTH_TOKEN="your-token"

# 2. Test
node test-api.mjs

# 3. Profit! üéâ
```

---

**–ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É! üöÄ**

–û—Ç–∫—Ä–æ–π—Ç–µ `test-api.html` –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ `node test-api.mjs` –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å!

